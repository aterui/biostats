# Project Management

## R Project

For this entire book, I will use `R Project` as a fundamental unit of work-space, in which all the relevant materials (e.g., R scripts `.R` and data files) are assembled together. There are many ways to organize your project, but I usually make a single `R Project` for a collection of scripts and data that will lead to a single publication (see example [here](https://github.com/aterui/public-proj_stream-diversity)). To setup an `R Project` you will need *RStudio* in addition to base *R*. While *R* is a stand-alone software, I strongly recommend to use it with *RStudio*. *RStudio* has many functions that help your data analysis. *R* and *RStudio* can be installed from the following websites:

-   [R](https://www.r-project.org/) (you can choose any CRAN mirror to download)
-   RStudio

Once you open *RStudio*, you will see the following interface (Figure \@ref(fig:ui)). There are three major panels in its first appearance -- `Console`, `Environment`, and `Files`. `Console` is the place where you write your codes and execute calculation/data manipulation/analysis. `Environment` lists items you saved as an object. `Files` list any files in a designated location in your computer.

```{r ui, fig.cap = "RStudio interface."}
knitr::include_graphics(here::here("image/r_image01.png"))
```

Let's type something in console to see what happens. Copy and paste the following script to `Console`. You should see `x` in the environment.

```{r, echo = TRUE}

x <- c(1, 2)
```

`x` is an **object** where information is saved - in this case, we stored a sequence of `1` and `2` in object `x`. Once you store the information into `x`, you can call it just typing `x`.

```{r, echo = TRUE}
x
```

Sweet! You can work on your data like this, however, **it is actually a BAD idea**. As you work on your project, numerous materials will be generated (e.g., I would write \> 2000 lines of codes for one project). How do you manage your codes?

### Script Editor

It is highly recommended to mange your script in `Editor` instead. `Editor` is where you draft and tweak your codes before executing them in `Console`. To create space for `Editor`, hit `Ctr + Shift + N`. A new panel pops up on the top left. Let's type the following script in `Editor`.

```{r, echo = TRUE}
y <- c(3, 4)
```

Then, hit `Ctr + S` to save the `Editor` file. *RStudio* will prompt you to enter the file name of the `Editor`[^01-project-1].

[^01-project-1]: In *R*, an editor file has an extension of `.R`.

### File Name

It is also critical to have **consistent naming rules** for your files. As you make progress on your project, the number of files in each sub-directory will increase, perhaps exponentially. You will find it difficult navigating yourself unless you have clear naming rules for files (and even worse for others). Here are some recommendations:

-   **NO SPACE.** Use underscore.
    -   Do: `script_week1.R`
    -   Don't: `script week1.R`
-   **NO UPPERCASE.** Use lowercase for file names.
    -   Do: `script_week1.R`
    -   Don't: `Script_week1.R`
-   **BE CONSISTENT.** Apply consistent naming rules within a project.
    -   Do: R scripts for figures always start with a common prefix, e.g., `figure_XXX.R` `figure_YYY.R`(`XXX` and `YYY` specifies further details).
    -   Don't: R scripts for figures start with random text, e.g., `XXX_fig.R` , `Figure_Y2.R` , `plotB.R`.

### Structure Your Project

If you do not save or randomly locate your codes within your computer, you will lose necessary items sooner or later. For this reason, I assemble all the relevant materials in a single `R Project`. You can create a new `R Project` with the following procedure.

a.  Go to `File > New Project` on the top menu
b.  Select `New Directory`
c.  Select `New Project`

A new window pops up and prompts you to name a directory with a location in your computer. Click `Browse` to select a location for the directory[^01-project-2].

[^01-project-2]: When you locate your project directories in your computer, I would strongly recommend to create a designated space. For example, in my computer, I have a folder named /`r_project` in which all `R Project` directories are located.

The internal structure of an `R Project` is extremely important to navigate yourself (others once it's published). `R Project` will be composed of multiple types of files, typically `.R`, `.csv`, `.rds`, `.Rmd` among others. Unless those files are arranged in an organized manner, it is VERY LIKELY to make severe errors in coding. So I take this seriously. Table \@ref(tab:str) is my suggested subdirectory structure.

| Name           | Content                                                                                                                                                                       |
|----------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `README.md`    | Markdown file explaining contents in the `R Project`. Can be derived from `README.Rmd`.                                                                                       |
| `/code`        | Sub-directory for R scripts (`.R`).                                                                                                                                           |
| `/data_raw`    | Sub-directory for raw data before data manipulation (`.csv` or other formats). Files in this sub-directory MUST NOT be modified unless there are changes to raw data entries. |
| `/data_format` | Sub-directory for formatted data (`.csv`, `.rds`, or other formats).                                                                                                          |
| `/output`      | Sub-directory for result outputs (`.csv`, `.rds`, or other formats). This may include statistical estimates from linear regression models etc.                                |
| `/rmd`         | (Optional) Sub-directory for Rmarkdown files (`.Rmd`). Rmarkdown allows seamless integration of R scripts and text.                                                           |

: (#tab:str) Suggested internal structure of `R Project`

## Robust coding

While this is not mandatory, I strongly recommend to use *RStudio* with *Git* & *GitHub* (see Chapter \@ref(appendix) Appendix for guidance). Coding is innately error-prone[^01-project-3]; every programmers, even bright ones, make mistakes - no exception. However, the critical difference between beginner and advanced programmers is whether they develop robust coding rules with a self-error-detection system. *Git* is the key to this. I will touch on this occasionally throughout this book.

[^01-project-3]: well WAY BETTER than manual data manipulation!
